operationId: listItemsPaged
method: GET
path: /items
tags: [sample]

x-auth:
  connection_trn: "trn:authflow:tenant:connection/sample-user"
  scheme: oauth2
  injection:
    type: jsonada
    mapping: |
      {
        "headers": {
          "Authorization": "{% 'Bearer ' & $access_token %}"
        }
      }

x-timeout-ms: 4000
x-retry:
  max_retries: 2
  base_delay_ms: 300
  max_delay_ms: 3000
  retry_on: ["5xx", "429"]
  respect_retry_after: true

x-ok-path: "{% $status >= 200 and $status < 300 %}"
x-output-pick: "{% $body %}"

# Simulated base URL; replace with real service
x-base-url: "https://api.example.com"
x-real-http: false

# Pagination: items array at body.items, next token at body.next
x-pagination:
  mode: cursor
  param: cursor
  limit: 5
  items_expr: "{% $body.items %}"
  next_expr: "{% $body.next %}"
  stop_expr: "{% $body.next = '' or $body.next = null %}"

